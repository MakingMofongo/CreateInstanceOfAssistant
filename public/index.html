<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KOKO AI - Your AI Receptionist Creator</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary-color: #FF3E3E;
            --secondary-color: #FF7676;
            --background-color: #1A1A1A;
            --surface-color: #2C2C2C;
            --on-surface-color: #FFFFFF;
            --error-color: #FF5252;
            --success-color: #4CAF50;
            --text-color: #F0F0F0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            flex: 1;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            box-sizing: border-box;
        }

        .logo {
            text-align: center;
            margin-bottom: 2rem;
        }

        .logo svg {
            max-width: 100%;
            height: auto;
        }

        h1, h2 {
            color: var(--primary-color);
            text-align: center;
        }

        .card {
            background-color: var(--surface-color);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(255, 62, 62, 0.1);
            transition: all 0.3s ease;
        }

        .step-indicator::before {
            background-color: var(--secondary-color);
        }

        .step {
            background-color: var(--surface-color);
            color: var(--text-color);
        }

        .step.active {
            background-color: var(--primary-color);
            color: var(--on-surface-color);
        }

        .step.completed {
            background-color: var(--success-color);
            color: var(--on-surface-color);
        }

        input, select {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-color);
            border: 1px solid var(--secondary-color);
        }

        input:focus, select:focus {
            box-shadow: 0 0 0 2px var(--primary-color);
        }

        button {
            background-color: var(--primary-color);
            color: var(--on-surface-color);
        }

        button:hover {
            background-color: var(--secondary-color);
        }

        .progress-step {
            background-color: rgba(255, 62, 62, 0.05);
        }

        .progress-step.active {
            background-color: rgba(255, 62, 62, 0.1);
        }

        .progress-step.completed {
            background-color: rgba(76, 175, 80, 0.1);
        }

        .progress-step.completed .progress-step-icon {
            background-color: var(--success-color);
        }

        .progress-step.active .progress-step-icon {
            background-color: var(--primary-color);
        }

        .progress-bar-fill {
            background-color: var(--primary-color);
        }

        .credentials-section {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 2rem;
            color: #ffffff;
            box-shadow: 0 8px 32px rgba(46, 204, 113, 0.2);
        }

        .credential-item {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .credential-label {
            font-weight: 500;
        }

        .credential-value {
            font-family: 'Courier New', monospace;
            background-color: rgba(0, 0, 0, 0.1);
            padding: 0.5rem;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .password-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: #ffffff;
            cursor: pointer;
            font-size: 0.9rem;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }

        .password-toggle:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }

        .password-warning {
            text-align: center;
            font-size: 0.8rem;
            margin-top: 1rem;
            color: #f1c40f;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            position: relative;
        }

        .step-indicator::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background-color: var(--primary-color);
            transform: translateY(-50%);
            z-index: 0;
        }

        .step {
            position: relative;
            z-index: 1;
            background-color: var(--surface-color);
            padding: 0.5rem;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        form {
            display: flex;
            flex-direction: column;
        }

        label {
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        input, select {
            padding: 1rem;
            margin-bottom: 1.5rem;
            border: none;
            border-radius: 8px;
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-color);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--secondary-color);
        }

        button {
            background-color: var(--primary-color);
            color: var(--on-surface-color);
            border: none;
            padding: 1rem;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 1px;
        }

        button:hover {
            background-color: var(--secondary-color);
            color: var(--surface-color);
        }

        .progress-container {
            margin-top: 2rem;
        }

        .progress-step {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .progress-step.active {
            background-color: rgba(98, 0, 234, 0.1);
        }

        .progress-step.completed {
            background-color: rgba(3, 218, 198, 0.1);
        }

        .progress-step-header {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .progress-step-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 1rem;
            font-size: 0.8rem;
            color: var(--on-surface-color);
        }

        .progress-step-title {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .progress-step-description {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 0.5rem;
        }

        .progress-bar {
            height: 4px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background-color: var(--secondary-color);
            transition: width 0.3s ease;
        }

        .credentials-section {
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 2rem;
            color: var(--on-surface-color);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .credentials-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            text-align: center;
        }

        .credential-item {
            background-color: rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .credential-label {
            font-weight: 500;
        }

        .credential-value {
            font-family: 'Courier New', monospace;
            background-color: rgba(0, 0, 0, 0.2);
            padding: 0.5rem;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .password-toggle {
            background: none;
            border: none;
            color: var(--on-surface-color);
            cursor: pointer;
            font-size: 0.9rem;
            padding: 0.5rem;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }

        .password-toggle:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .password-warning {
            text-align: center;
            font-size: 0.8rem;
            margin-top: 1rem;
            color: var(--error-color);
        }

        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        @media (max-width: 600px) {
            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 2rem;
            }

            .card {
                padding: 1.5rem;
            }

            .step {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }
        }

        select {
            background-color: var(--surface-color);
            color: var(--text-color);
            border: 1px solid var(--secondary-color);
            padding: 1rem;
            margin-bottom: 1.5rem;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%23FFFFFF' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            padding-right: 2.5rem;
        }

        select:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--secondary-color);
        }

        select option {
            background-color: var(--surface-color);
            color: var(--text-color);
        }

        .form-section {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .form-section h3 {
            margin-top: 0;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
            border-bottom: 1px solid var(--secondary-color);
            padding-bottom: 0.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        input, select, textarea {
            width: 100%;
            padding: 0.75rem;
            border-radius: 4px;
            border: 1px solid var(--secondary-color);
            background-color: rgba(0, 0, 0, 0.1);
            color: var(--text-color);
            font-size: 1rem;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .required-field::after {
            content: '*';
            color: var(--error-color);
            margin-left: 0.25rem;
        }

        #livePrompt {
            width: 100%;
            height: 200px;
            overflow-y: auto;
            border: 1px solid #ccc;
            padding: 10px;
            background-color: #000000;
            color: #ffffff;
            font-family: monospace;
        }

        button[type="submit"] {
            background-color: var(--primary-color);
            color: var(--on-surface-color);
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            width: 100%;
            margin-top: 2rem;
        }

        button[type="submit"]:hover {
            background-color: var(--secondary-color);
        }

        .collapsible {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-color);
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
            transition: 0.4s;
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .active-collapsible, .collapsible:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .collapsible:after {
            content: '\002B';
            color: var(--text-color);
            font-weight: bold;
            float: right;
            margin-left: 5px;
        }

        .active-collapsible:after {
            content: "\2212";
        }

        .collapsible-content {
            padding: 0 18px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            background-color: rgba(0, 0, 0, 0.1);
            border-radius: 0 0 4px 4px;
        }

        .file-upload {
            margin-top: 20px;
        }

        .file-upload-btn {
            width: 100%;
            margin: 0;
            color: #fff;
            background: var(--secondary-color);
            border: none;
            padding: 10px;
            border-radius: 4px;
            transition: all .2s ease;
            outline: none;
            text-transform: uppercase;
            font-weight: 700;
        }

        .file-upload-btn:hover {
            background: var(--primary-color);
            color: #ffffff;
            transition: all .2s ease;
            cursor: pointer;
        }

        .file-upload-btn:active {
            border: 0;
            transition: all .2s ease;
        }

        .file-upload-content {
            display: none;
            text-align: center;
        }

        .file-upload-input {
            position: absolute;
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            outline: none;
            opacity: 0;
            cursor: pointer;
        }

        .image-upload-wrap {
            margin-top: 20px;
            border: 4px dashed var(--secondary-color);
            position: relative;
        }

        .image-dropping,
        .image-upload-wrap:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border: 4px dashed var(--primary-color);
        }

        .drag-text {
            text-align: center;
            padding: 40px 0;
        }

        .drag-text h3 {
            font-weight: 100;
            text-transform: uppercase;
            color: var(--text-color);
            padding: 60px 0;
        }

        .country-select-container {
            position: relative;
        }

        .country-select-container input {
            width: 100%;
            padding: 0.75rem;
            border-radius: 4px;
            border: 1px solid var(--secondary-color);
            background-color: rgba(0, 0, 0, 0.1);
            color: var(--text-color);
            font-size: 1rem;
        }

        .country-options {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            max-height: 200px;
            overflow-y: auto;
            background-color: var(--surface-color);
            border: 1px solid var(--secondary-color);
            border-top: none;
            border-radius: 0 0 4px 4px;
            z-index: 10;
            display: none;
        }

        .country-option {
            padding: 0.5rem;
            cursor: pointer;
        }

        .country-option:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        footer {
            background-color: var(--surface-color);
            color: var(--text-color);
            padding: 2rem 0;
            width: 100%;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            padding: 0 2rem;
            box-sizing: border-box;
        }

        .footer-logo {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .footer-links {
            display: flex;
            gap: 1rem;
        }

        .footer-links a {
            color: var(--text-color);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--primary-color);
        }

        .footer-copyright {
            width: 100%;
            margin-top: 1rem;
            font-size: 0.9rem;
            opacity: 0.8;
            text-align: center;
        }

        @media (max-width: 600px) {
            .footer-content {
                flex-direction: column;
                text-align: center;
            }

            .footer-links {
                margin-top: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">
            <svg width="150" height="50" viewBox="0 0 150 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                <text x="10" y="35" font-family="Poppins, sans-serif" font-size="32" font-weight="bold">
                    <tspan fill="#FF3E3E">KOKO</tspan>
                    <tspan fill="#FFFFFF">AI</tspan>
                </text>
            </svg>
        </div>
        <h1>Create Your AI Receptionist</h1>
        <div class="card">
            <div class="step-indicator">
                <div class="step active" id="step1">1</div>
                <div class="step" id="step2">2</div>
                <div class="step" id="step3">3</div>
            </div>
            <div class="step-content active" id="step1-content">
                <form id="createBotForm">
                    <div class="form-section">
                        <h3>1. Select Assistant Type</h3>
                        <div class="form-group">
                            <label for="botType" class="required-field">Assistant Type</label>
                            <select id="botType" name="botType" required>
                                <option value="" disabled selected>Select type</option>
                                <option value="Hotel">Hotel</option>
                                <option value="Hospital">Hospital</option>
                                <option value="Custom">Custom</option>
                            </select>
                        </div>
                    </div>

                    <!-- Hotel Form -->
                    <div id="hotelForm" class="assistant-form form-section" style="display: none;">
                        <h3>2. Hotel Information</h3>
                        <div class="form-group">
                            <label for="hotelName" class="required-field">Hotel Name</label>
                            <input type="text" id="hotelName" name="hotelName" required placeholder="Enter your hotel name">
                        </div>
                        
                        <div class="form-group">
                            <label for="hotelEmail" class="required-field">Email</label>
                            <input type="email" id="hotelEmail" name="email" required placeholder="Enter your email address">
                        </div>
                        
                        <div class="form-group">
                            <label for="hotelCountry" class="required-field">Country</label>
                            <div class="country-select-container">
                                <input type="text" id="hotelCountry" name="country" required placeholder="Search for a country">
                                <div class="country-options" id="hotelCountryOptions"></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="hotelStars">Hotel Stars</label>
                            <select id="hotelStars" name="hotelStars">
                                <option value="" disabled selected>Select star rating</option>
                                <option value="1">1 Star</option>
                                <option value="2">2 Stars</option>
                                <option value="3">3 Stars</option>
                                <option value="4">4 Stars</option>
                                <option value="5">5 Stars</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="hotelRooms">Number of Rooms</label>
                            <input type="number" id="hotelRooms" name="hotelRooms" placeholder="Enter number of rooms">
                        </div>

                        <button type="button" class="collapsible">+ Additional Hotel Information</button>
                        <div class="collapsible-content">
                            <div class="form-group">
                                <label for="hotelAmenities">Amenities (comma-separated)</label>
                                <input type="text" id="hotelAmenities" name="hotelAmenities" placeholder="e.g., Pool, Spa, Restaurant">
                            </div>

                            <div class="form-group">
                                <label for="hotelDescription">Hotel Description</label>
                                <textarea id="hotelDescription" name="hotelDescription" rows="3" placeholder="Describe your hotel"></textarea>
                            </div>

                            <div class="form-group">
                                <label for="hotelPolicies">Hotel Policies</label>
                                <textarea id="hotelPolicies" name="hotelPolicies" rows="3" placeholder="Enter hotel policies"></textarea>
                            </div>

                            <div class="form-group">
                                <label for="hotelLocation">Hotel Location</label>
                                <input type="text" id="hotelLocation" name="hotelLocation" placeholder="Enter hotel address">
                            </div>
                        </div>
                    </div>

                    <!-- Hospital Form -->
                    <div id="hospitalForm" class="assistant-form form-section" style="display: none;">
                        <h3>2. Hospital Information</h3>
                        <div class="form-group">
                            <label for="hospitalName" class="required-field">Hospital Name</label>
                            <input type="text" id="hospitalName" name="hospitalName" required placeholder="Enter your hospital name">
                        </div>
                        
                        <div class="form-group">
                            <label for="hospitalEmail" class="required-field">Email</label>
                            <input type="email" id="hospitalEmail" name="email" required placeholder="Enter your email address">
                        </div>
                        
                        <div class="form-group">
                            <label for="hospitalCountry" class="required-field">Country</label>
                            <div class="country-select-container">
                                <input type="text" id="hospitalCountry" name="country" required placeholder="Search for a country">
                                <div class="country-options" id="hospitalCountryOptions"></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="hospitalType">Hospital Type</label>
                            <select id="hospitalType" name="hospitalType">
                                <option value="" disabled selected>Select hospital type</option>
                                <option value="general">General Hospital</option>
                                <option value="specialized">Specialized Hospital</option>
                                <option value="teaching">Teaching Hospital</option>
                                <option value="clinic">Clinic</option>
                            </select>
                        </div>

                        <button type="button" class="collapsible">+ Additional Hospital Information</button>
                        <div class="collapsible-content">
                            <div class="form-group">
                                <label for="hospitalDepartments">Departments (comma-separated)</label>
                                <input type="text" id="hospitalDepartments" name="hospitalDepartments" placeholder="e.g., Emergency, Cardiology, Pediatrics">
                            </div>

                            <div class="form-group">
                                <label for="hospitalBeds">Number of Beds</label>
                                <input type="number" id="hospitalBeds" name="hospitalBeds" placeholder="Enter number of beds">
                            </div>

                            <div class="form-group">
                                <label for="hospitalDescription">Hospital Description</label>
                                <textarea id="hospitalDescription" name="hospitalDescription" rows="3" placeholder="Describe your hospital"></textarea>
                            </div>

                            <div class="form-group">
                                <label for="hospitalServices">Hospital Services</label>
                                <textarea id="hospitalServices" name="hospitalServices" rows="3" placeholder="List main hospital services"></textarea>
                            </div>

                            <div class="form-group">
                                <label for="hospitalLocation">Hospital Location</label>
                                <input type="text" id="hospitalLocation" name="hospitalLocation" placeholder="Enter hospital address">
                            </div>
                        </div>
                    </div>

                    <!-- Custom Form -->
                    <div id="customForm" class="assistant-form form-section" style="display: none;">
                        <h3>2. Custom Assistant Information</h3>
                        <div class="form-group">
                            <label for="customAssistantName" class="required-field">Assistant Name</label>
                            <input type="text" id="customAssistantName" name="assistantName" required placeholder="Enter your assistant's name">
                        </div>
                        
                        <div class="form-group">
                            <label for="customEmail" class="required-field">Email</label>
                            <input type="email" id="customEmail" name="email" required placeholder="Enter your email address">
                        </div>
                        
                        <div class="form-group">
                            <label for="customCountry" class="required-field">Country</label>
                            <div class="country-select-container">
                                <input type="text" id="customCountry" name="country" required placeholder="Search for a country">
                                <div class="country-options" id="customCountryOptions"></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="customIndustry">Industry</label>
                            <input type="text" id="customIndustry" name="customIndustry" placeholder="e.g., Retail, Education, Technology">
                        </div>

                        <div class="form-group">
                            <label for="customPurpose">Assistant's Purpose</label>
                            <textarea id="customPurpose" name="customPurpose" rows="3" placeholder="Describe the main purpose of your AI assistant"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="customTone">Preferred Tone</label>
                            <select id="customTone" name="customTone">
                                <option value="" disabled selected>Select preferred tone</option>
                                <option value="professional">Professional</option>
                                <option value="friendly">Friendly</option>
                                <option value="casual">Casual</option>
                                <option value="formal">Formal</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="customKnowledgeBase">Knowledge Base</label>
                            <textarea id="customKnowledgeBase" name="customKnowledgeBase" rows="3" placeholder="Enter key information for your assistant"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="customGuidelines">Guidelines</label>
                            <textarea id="customGuidelines" name="customGuidelines" rows="3" placeholder="Enter any specific guidelines for your assistant"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="customPrompt">Custom Prompt (Optional)</label>
                            <textarea id="customPrompt" name="customPrompt" rows="6" placeholder="Enter your custom prompt here. If left empty, a prompt will be generated based on the information above."></textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>3. Additional Information</h3>
                        <div class="file-upload">
                            <button class="file-upload-btn" type="button" onclick="document.getElementById('fileUpload').click()">Upload Additional Information File</button>
                            <div class="image-upload-wrap">
                                <input id="fileUpload" class="file-upload-input" type='file' onchange="handleFileSelect(this);" accept=".csv,.txt" />
                                <div class="drag-text">
                                    <h3>Drag and drop a file or click to upload</h3>
                                </div>
                            </div>
                            <div class="file-upload-content" style="display: none;">
                                <p class="uploaded-file-name"></p>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>4. Live Prompt Preview</h3>
                        <div id="livePrompt" style="width: 100%; height: 200px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; background-color: #000000; color: #ffffff; font-family: monospace;"></div>
                    </div>

                    <button type="submit">Create My AI Receptionist</button>
                </form>
            </div>
            <div class="step-content" id="step2-content">
                <h2>Creating Your AI Receptionist</h2>
                <div class="progress-container" id="progress-steps"></div>
            </div>
            <div class="step-content" id="step3-content">
                <h2>Your AI Receptionist is Ready!</h2>
                <div id="completion-details"></div>
            </div>
        </div>
    </div>

    <div class="celebration" id="celebration"></div>

    <!-- Add this footer just before the closing </body> tag -->
    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <span style="color: var(--primary-color);">KOKO</span>AI
            </div>
            <div class="footer-links">
                <a href="#">About</a>
                <a href="#">Contact</a>
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
            </div>
        </div>
        <div class="footer-copyright">
            ¬© 2024 KOKOAI. All rights reserved.
        </div>
    </footer>

    <!-- Keep the persistent prompt div here -->
    <div id="persistentPrompt" style="position: fixed; bottom: 0; left: 0; right: 0; background-color: rgba(0, 0, 0, 0.8); color: white; transition: all 0.3s ease; transform: translateY(calc(100% - 40px));">
        <div id="promptHeader" style="display: flex; justify-content: space-between; align-items: center; padding: 10px; cursor: pointer;">
            <h4 style="margin: 0;">Live Prompt Preview</h4>
            <button id="togglePrompt" style="background: none; border: none; color: white; cursor: pointer;">‚ñ≤</button>
        </div>
        <div id="persistentPromptContent" style="padding: 10px; max-height: 30vh; overflow-y: auto;"></div>
    </div>

    <script>
        document.getElementById('createBotForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const botType = document.getElementById('botType').value;
            if (!botType) {
                alert('Please select an Assistant Type');
                return;
            }
            
            const formData = new FormData(this);
            
            // Add the file to formData if it exists
            const fileInput = document.getElementById('fileUpload');
            if (fileInput.files[0]) {
                formData.append('additionalInfo', fileInput.files[0]);
            }
            
            showStep(2);
            
            try {
                const response = await fetch('/create-bot', {
                    method: 'POST',
                    body: formData, // Use FormData instead of JSON
                });
                
                if (!response.ok) {
                    throw new Error('Failed to initiate bot creation');
                }
                
                const { requestId } = await response.json();
                const eventSource = new EventSource(`/create-bot?requestId=${requestId}`);
                
                eventSource.onmessage = function(event) {
                    const data = JSON.parse(event.data);
                    updateProgressUI(data);
                };
                
                eventSource.onerror = function(error) {
                    console.error('EventSource failed:', error);
                    document.getElementById('progress-steps').innerHTML = '<div class="error-message">Error: Connection lost. Please try again.</div>';
                    eventSource.close();
                };
            } catch (error) {
                console.error('Fetch error:', error);
                document.getElementById('progress-steps').innerHTML = '<div class="error-message">Error: Failed to send data. Please try again.</div>';
            }
        });

        function updateProgressUI(data) {
            const progressSteps = document.getElementById('progress-steps');
            const steps = [
                { title: 'Initializing', description: 'Setting up your AI receptionist', time: '~10 sec' },
                { title: 'Creating Knowledge Base', description: 'Building hotel information database', time: '~20 sec' },
                { title: 'Training AI', description: 'Teaching your AI about your hotel', time: '~30 sec' },
                { title: 'Cloud Setup', description: 'Preparing cloud infrastructure', time: '~20 sec' },
                { title: 'Deployment', description: 'Launching your AI receptionist', time: '~200 sec' },
                { title: 'Phone Configuration', description: 'Setting up your phone number', time: '~10 sec' }
            ];

            if (data.status === 'completed') {
                steps.forEach((step, index) => {
                    updateStepProgress(progressSteps.querySelector(`.progress-step:nth-child(${index + 1})`), 'completed', 100);
                });
                
                window.generatedPassword = data.password;
                
                document.getElementById('completion-details').innerHTML = `
                    <div class="credentials-section">
                        <div class="credentials-title">üéâ Your AI Receptionist is Ready! üéâ</div>
                        <div class="credential-item">
                            <span class="credential-label">üìû Phone Number:</span>
                            <span class="credential-value">${data.phoneNumber}</span>
                        </div>
                        <div class="credential-item">
                            <span class="credential-label">üåê Service URL:</span>
                            <span class="credential-value">${data.serviceUrl}</span>
                        </div>
                        <div class="credential-item">
                            <span class="credential-label"> Username:</span>
                            <span class="credential-value">${data.username}</span>
                        </div>
                        <div class="credential-item">
                            <span class="credential-label">üîë Password:</span>
                            <span class="credential-value password-hidden" id="password-value">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
                            <button class="password-toggle" onclick="togglePassword()">Show</button>
                        </div>
                        <p class="password-warning">üîí Keep these credentials safe and secure!</p>
                    </div>`;
                
                showStep(3);
                celebrate();
            } else if (data.error) {
                progressSteps.innerHTML += `<div class="progress-step error">‚ùå Error: ${data.error}</div>`;
            } else if (data.status !== 'end' && data.status !== 'Connected') {
                const currentStep = steps.findIndex(step => step.title.toLowerCase() === data.status.toLowerCase());
                if (currentStep !== -1) {
                    steps.forEach((step, index) => {
                        const stepElement = progressSteps.querySelector(`.progress-step:nth-child(${index + 1})`);
                        const stepStatus = index < currentStep ? 'completed' : index === currentStep ? 'active' : '';
                        const stepProgress = index < currentStep ? 100 : (index === currentStep ? data.progress : 0);
                        if (stepElement) {
                            updateStepProgress(stepElement, stepStatus, stepProgress);
                        } else {
                            progressSteps.innerHTML += createStepHTML(step, stepStatus, stepProgress);
                        }
                    });
                }
            }
        }

        function createStepHTML(step, status, progress) {
            return `
                <div class="progress-step ${status}">
                    <div class="progress-step-header">
                        <div class="progress-step-icon">${status === 'completed' ? '‚úì' : ''}</div>
                        <div class="progress-step-title">${step.title}</div>
                    </div>
                    <div class="progress-step-description">${step.description}</div>
                    <div class="progress-bar">
                        <div class="progress-bar-fill" style="width: ${progress}%"></div>
                    </div>
                    <div class="progress-step-time">${step.time}</div>
                </div>
            `;
        }

        function updateStepProgress(stepElement, status, progress) {
            if (stepElement) {
                stepElement.className = `progress-step ${status}`;
                stepElement.querySelector('.progress-step-icon').textContent = status === 'completed' ? '‚úì' : '';
                stepElement.querySelector('.progress-bar-fill').style.width = `${progress}%`;
            }
        }

        function togglePassword() {
            const passwordElement = document.getElementById('password-value');
            const toggleButton = document.querySelector('.password-toggle');
            
            if (passwordElement.classList.contains('password-hidden')) {
                passwordElement.textContent = window.generatedPassword;
                passwordElement.classList.remove('password-hidden');
                toggleButton.textContent = 'Hide';
            } else {
                passwordElement.textContent = '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢';
                passwordElement.classList.add('password-hidden');
                toggleButton.textContent = 'Show';
            }
        }

        function showStep(stepNumber) {
            document.querySelectorAll('.step-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
            
            document.getElementById(`step${stepNumber}-content`).classList.add('active');
            document.getElementById(`step${stepNumber}`).classList.add('active');
        }

        function celebrate() {
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#FF3E3E', '#FF7676', '#4CAF50', '#FFFFFF'],
            });

            setTimeout(() => {
                confetti({
                    particleCount: 50,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: ['#FF3E3E', '#FF7676', '#4CAF50', '#FFFFFF'],
                });
            }, 250);

            setTimeout(() => {
                confetti({
                    particleCount: 50,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: ['#FF3E3E', '#FF7676', '#4CAF50', '#FFFFFF'],
                });
            }, 400);
        }

        // Toggle Assistant Forms Based on Selection
        document.getElementById('botType').addEventListener('change', function() {
            const selectedType = this.value;
            document.querySelectorAll('.assistant-form').forEach(form => {
                form.style.display = 'none';
                form.querySelectorAll('input, select').forEach(input => {
                    input.required = false;
                });
            });
            if (selectedType) {
                const selectedForm = document.getElementById(`${selectedType.toLowerCase()}Form`);
                selectedForm.style.display = 'block';
                selectedForm.querySelectorAll('input[required], select[required]').forEach(input => {
                    input.required = true;
                });
            }
            updateLivePrompt();
        });

        // Update Live Prompt as User Fills the Form
        document.querySelectorAll('#createBotForm input, #createBotForm select, #createBotForm textarea').forEach(element => {
            element.addEventListener('input', updateLivePrompt);
        });

        function updateLivePrompt() {
            const botType = document.getElementById('botType').value;
            let promptTemplate = '';

            function highlight(text, placeholder, value) {
                if (value && value !== placeholder) {
                    return text.replace(new RegExp(placeholder, 'g'), `<span style="background-color: yellow; color: black;">${value}</span>`);
                }
                return text;
            }

            if (botType === 'Hotel') {
                const hotelName = document.getElementById('hotelName').value || '{HOTEL_NAME}';
                const stars = document.getElementById('hotelStars').value || '{STAR_RATING}';
                const rooms = document.getElementById('hotelRooms').value || '{NUMBER_OF_ROOMS}';
                const amenities = document.getElementById('hotelAmenities').value || '{AMENITIES}';
                const policies = document.getElementById('hotelPolicies').value || '{HOTEL_POLICIES}';

                promptTemplate = `You are the AI receptionist for {HOTEL_NAME}, a {STAR_RATING}-star hotel with {NUMBER_OF_ROOMS} rooms, fluent in every language. The hotel offers amenities such as {AMENITIES}. Speak in a friendly tone, and keep your responses short, precise, and conversational. Guide the caller with kindness, offering helpful advice to ensure they choose the best room.

Our policies include: {HOTEL_POLICIES}

Do not invent information‚Äîuse only what's provided. When asked about prices, share them and aim to complete the booking, mentioning you'll send a booking link at the end.

Start by asking the caller's name, and good luck!`;

                promptTemplate = highlight(promptTemplate, '{HOTEL_NAME}', hotelName);
                promptTemplate = highlight(promptTemplate, '{STAR_RATING}', stars);
                promptTemplate = highlight(promptTemplate, '{NUMBER_OF_ROOMS}', rooms);
                promptTemplate = highlight(promptTemplate, '{AMENITIES}', amenities);
                promptTemplate = highlight(promptTemplate, '{HOTEL_POLICIES}', policies);

            } else if (botType === 'Hospital') {
                const hospitalName = document.getElementById('hospitalName').value || '{HOSPITAL_NAME}';
                const hospitalType = document.getElementById('hospitalType').value || '{HOSPITAL_TYPE}';
                const departments = document.getElementById('hospitalDepartments').value || '{DEPARTMENTS}';
                const beds = document.getElementById('hospitalBeds').value || '{NUMBER_OF_BEDS}';

                promptTemplate = `You are the AI receptionist for {HOSPITAL_NAME}, a {HOSPITAL_TYPE} with {NUMBER_OF_BEDS} beds, fluent in every language. The hospital has departments including {DEPARTMENTS}. Maintain a compassionate and professional tone, ensuring clear and concise communication.

Do not provide medical advice‚Äîrefer to professionals when necessary. Ensure all interactions are respectful and adhere to patient privacy guidelines.

Begin by greeting the caller and asking how you can assist them today.`;

                promptTemplate = highlight(promptTemplate, '{HOSPITAL_NAME}', hospitalName);
                promptTemplate = highlight(promptTemplate, '{HOSPITAL_TYPE}', hospitalType);
                promptTemplate = highlight(promptTemplate, '{DEPARTMENTS}', departments);
                promptTemplate = highlight(promptTemplate, '{NUMBER_OF_BEDS}', beds);

            } else if (botType === 'Custom') {
                const assistantName = document.getElementById('customAssistantName').value || '{ASSISTANT_NAME}';
                const industry = document.getElementById('customIndustry').value || '{INDUSTRY}';
                const purpose = document.getElementById('customPurpose').value || '{PURPOSE}';
                const tone = document.getElementById('customTone').value || '{TONE}';
                const knowledgeBase = document.getElementById('customKnowledgeBase').value || '{KNOWLEDGE_BASE}';
                const guidelines = document.getElementById('customGuidelines').value || '{GUIDELINES}';

                promptTemplate = document.getElementById('customPrompt').value || 
`You are {ASSISTANT_NAME}, a customized AI assistant for the {INDUSTRY} industry, designed to {PURPOSE}. Your knowledge base is tailored to provide assistance in designated areas as specified by the user. Maintain a {TONE} tone that aligns with the brand and purpose you are created for.

Your knowledge base includes: {KNOWLEDGE_BASE}

Please follow these guidelines: {GUIDELINES}

Ensure all responses are accurate, helpful, and aligned with the provided guidelines. Feel free to ask clarifying questions to better assist the user.

Start by introducing yourself and asking how you can help today.`;

                promptTemplate = highlight(promptTemplate, '{ASSISTANT_NAME}', assistantName);
                promptTemplate = highlight(promptTemplate, '{INDUSTRY}', industry);
                promptTemplate = highlight(promptTemplate, '{PURPOSE}', purpose);
                promptTemplate = highlight(promptTemplate, '{TONE}', tone);
                promptTemplate = highlight(promptTemplate, '{KNOWLEDGE_BASE}', knowledgeBase);
                promptTemplate = highlight(promptTemplate, '{GUIDELINES}', guidelines);

            } else {
                promptTemplate = 'Please select an assistant type to see the prompt.';
            }

            document.getElementById('livePrompt').innerHTML = promptTemplate;
            document.getElementById('persistentPromptContent').innerHTML = promptTemplate;
        }

        // Allow Users to Edit the Prompt Directly
        document.getElementById('livePrompt').addEventListener('input', function() {
            // This allows users to edit the prompt directly if needed
        });

        // Trigger updateLivePrompt when the bot type is changed
        document.getElementById('botType').addEventListener('change', updateLivePrompt);

        // Collapsible sections
        var coll = document.getElementsByClassName("collapsible");
        for (var i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function() {
                this.classList.toggle("active-collapsible");
                var content = this.nextElementSibling;
                if (content.style.maxHeight){
                    content.style.maxHeight = null;
                } else {
                    content.style.maxHeight = content.scrollHeight + "px";
                }
            });
        }

        // File upload
        function handleFileSelect(input) {
            if (input.files && input.files[0]) {
                var fileName = input.files[0].name;
                document.querySelector('.image-upload-wrap').style.display = 'none';
                document.querySelector('.file-upload-content').style.display = 'block';
                document.querySelector('.uploaded-file-name').textContent = fileName;
            } else {
                removeUpload();
            }
        }

        function removeUpload() {
            document.getElementById('fileUpload').value = '';
            document.querySelector('.file-upload-content').style.display = 'none';
            document.querySelector('.image-upload-wrap').style.display = 'block';
        }

        document.querySelector('.image-upload-wrap').addEventListener('dragover', function () {
            this.classList.add('image-dropping');
        });

        document.querySelector('.image-upload-wrap').addEventListener('dragleave', function () {
            this.classList.remove('image-dropping');
        });

        // Add this new script for the persistent prompt functionality
        const persistentPrompt = document.getElementById('persistentPrompt');
        const promptHeader = document.getElementById('promptHeader');
        const togglePrompt = document.getElementById('togglePrompt');
        let isPromptVisible = false;

        promptHeader.addEventListener('click', () => {
            isPromptVisible = !isPromptVisible;
            persistentPrompt.style.transform = isPromptVisible ? 'translateY(0)' : 'translateY(calc(100% - 40px))';
            togglePrompt.textContent = isPromptVisible ? '‚ñº' : '‚ñ≤';
        });

        // Show the prompt when any form field is focused
        document.querySelectorAll('input, select, textarea').forEach(element => {
            element.addEventListener('focus', () => {
                if (!isPromptVisible) {
                    isPromptVisible = true;
                    persistentPrompt.style.transform = 'translateY(0)';
                    togglePrompt.textContent = '‚ñº';
                }
            });
        });

        // Initial update of the persistent prompt
        updateLivePrompt();

        // Load countries and set up country selection
        fetch('countries.json')
            .then(response => response.json())
            .then(countries => {
                setupCountrySelect('hotelCountry', countries);
                setupCountrySelect('hospitalCountry', countries);
                setupCountrySelect('customCountry', countries);
            });

        function setupCountrySelect(inputId, countries) {
            const input = document.getElementById(inputId);
            const optionsContainer = document.getElementById(inputId + 'Options');

            input.addEventListener('input', () => {
                const value = input.value.toLowerCase();
                const filteredCountries = countries.filter(country => 
                    country.name.toLowerCase().includes(value)
                );
                
                optionsContainer.innerHTML = '';
                filteredCountries.forEach(country => {
                    const option = document.createElement('div');
                    option.classList.add('country-option');
                    option.textContent = country.name;
                    option.addEventListener('click', () => {
                        input.value = country.name;
                        optionsContainer.style.display = 'none';
                    });
                    optionsContainer.appendChild(option);
                });

                optionsContainer.style.display = filteredCountries.length > 0 ? 'block' : 'none';
            });

            input.addEventListener('focus', () => {
                if (input.value === '') {
                    const allCountries = countries.slice(0, 10); // Show first 10 countries
                    optionsContainer.innerHTML = '';
                    allCountries.forEach(country => {
                        const option = document.createElement('div');
                        option.classList.add('country-option');
                        option.textContent = country.name;
                        option.addEventListener('click', () => {
                            input.value = country.name;
                            optionsContainer.style.display = 'none';
                        });
                        optionsContainer.appendChild(option);
                    });
                    optionsContainer.style.display = 'block';
                }
            });

            document.addEventListener('click', (e) => {
                if (!input.contains(e.target) && !optionsContainer.contains(e.target)) {
                    optionsContainer.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html>
